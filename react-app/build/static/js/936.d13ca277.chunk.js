"use strict";(self.webpackChunkreact_app=self.webpackChunkreact_app||[]).push([[936],{966:function(e,n,r){var t=r(184);n.Z=function(e){var n=e.error;return n&&(0,t.jsx)("p",{className:"text-danger mb-1",children:n.message})}},9815:function(e,n,r){var t=r(2791),i=r(2007),l=r.n(i),o=r(966),a=r(184),s=(0,t.forwardRef)((function(e,n){var r=e.type,t=void 0===r?"text":r,i=e.onChange,l=e.placeholder,s=e.name,c=e.errors,d=e.disabled,u=void 0!==d&&d;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{ref:n,id:s,name:s,onChange:i,type:t,className:c[s]?"form-control border border-danger":"form-control",placeholder:l,disabled:u}),(0,a.jsx)(o.Z,{error:c[s]})]})}));s.defaultProps={},s.propTypes={type:l().string,onChange:l().func,placeholder:l().string,name:l().string,errors:l().object,disabled:l().bool},s.displayName="Input",n.Z=s},3015:function(e,n,r){var t=r(184),i=function(e){var n=e.label,r=e.loading,i=e.className,l=void 0===i?"":i;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("button",{type:"submit",className:"submit-btn".concat(l?" "+l:""),disabled:r,children:[n,r?(0,t.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):""]})})};n.Z=i,i.defaultProps={}},682:function(e,n,r){r.d(n,{Wk:function(){return I},MU:function(){return R},An:function(){return P},od:function(){return k},bs:function(){return T},VG:function(){return E},$H:function(){return C},cY:function(){return H},rm:function(){return V}});var t=r(1413),i=r(885),l=r(2791),o=r(3270),a=r(9434),s=r(6871),c=r(5631),d=function(e){return{type:c.CV,payload:e}},u=function(e){return{type:c.pU,payload:e}},p=function(){return{type:c.yz}},f=function(e){return{type:c.my,payload:e}},m=function(e){return{type:c.Ye,payload:e}},v=function(e){return{type:c.kH,payload:e}},j=(r(6451),function(e){return function(n){return n.environment[e]}}),h=j("isLoading"),x=j("list"),b=j("listParams"),g=j("getListFailed"),Z=j("item"),N=j("getItemFailed"),w=j("createSuccess"),y=j("createFailed"),_=j("updateSuccess"),S=j("updateFailed"),q=j("deleteSuccess"),F=j("deleteFailed"),T=function(){var e=(0,o.Kx)(),n=e.get("page")||1,r=e.get("per_page")||10,t=e.get("project_id");return(0,l.useMemo)((function(){return{page:n,per_page:r,order_by_created_at:"desc",project_id:t||void 0}}),[n,r,t])},k=function(e){return(0,o.Zp)({action:d,loadingSelector:h,dataSelector:x,failedSelector:g,param:e})},E=function(){return(0,a.v9)(b)},C=function(e,n){var r=null;return null!==e&&void 0!==e&&e.project_id&&(r=n.find((function(n){return n.id==e.project_id})))&&(r={value:r.id,label:r.name}),(0,l.useMemo)((function(){return{id:(null===e||void 0===e?void 0:e.id)||null,project_id:r,name:(null===e||void 0===e?void 0:e.name)||"",baseurl:(null===e||void 0===e?void 0:e.baseurl)||"",description:(null===e||void 0===e?void 0:e.description)||""}}),[e,r])},I=function(){var e=(0,s.s0)(),n=(0,o.qd)({loadingSelector:h,action:u}),r=(0,i.Z)(n,2),l=r[0],a=r[1];(0,o.E2)(w,"Create environment success",(function(){return e("/environment")})),(0,o.dH)(y,"Create environment Failed");return[l,function(e){var n,r=(0,t.Z)((0,t.Z)({},e),{},{project_id:null===(n=e.project_id)||void 0===n?void 0:n.value});return a(r)}]},V=function(){var e=(0,s.s0)(),n=(0,o.qd)({loadingSelector:h,action:m}),r=(0,i.Z)(n,2),l=r[0],a=r[1];(0,o.E2)(_,"Update environment success",(function(){return e("/environment")})),(0,o.dH)(S,"Update environment Failed");return[l,function(e){var n,r=(0,t.Z)((0,t.Z)({},e),{},{project_id:null===(n=e.project_id)||void 0===n?void 0:n.value});return a(r)}]},H=function(){(0,o.Yw)(p)},P=function(e){return(0,o.Zp)({action:f,loadingSelector:h,dataSelector:Z,failedSelector:N,param:e})},R=function(e){var n=(0,a.I0)(),r=(0,o.qd)({loadingSelector:h,action:v}),t=(0,i.Z)(r,2),l=t[0],s=t[1];return(0,o.E2)(q,"Delete environment success",(function(){n(d(e))})),(0,o.dH)(F,"Delete environment Failed"),[l,s]}},9822:function(e,n,r){r.d(n,{Qs:function(){return C},L8:function(){return P},Xn:function(){return E},Y$:function(){return H},Z0:function(){return T},ao:function(){return F},l:function(){return k},$0:function(){return V},dY:function(){return I}});var t=r(885),i=r(2791),l=r(3270),o=r(9434),a=r(6871),s=r(7166),c=function(e){return{type:s.Qb,payload:e}},d=function(e){return{type:s.zi,payload:e}},u=function(){return{type:s.Nq}},p=function(e){return{type:s.E3,payload:e}},f=function(e){return{type:s.OV,payload:e}},m=function(e){return{type:s.TA,payload:e}},v=(r(6451),function(e){return function(n){return n.project[e]}}),j=v("isLoading"),h=v("list"),x=v("listParams"),b=v("getListFailed"),g=v("item"),Z=v("getItemFailed"),N=v("createSuccess"),w=v("createFailed"),y=v("updateSuccess"),_=v("updateFailed"),S=v("deleteSuccess"),q=v("deleteFailed"),F=function(){var e=(0,l.Kx)(),n=e.get("page")||1,r=e.get("per_page")||10;return(0,i.useMemo)((function(){return{page:n,per_page:r,order_by_created_at:"desc"}}),[n,r])},T=function(e){return(0,l.Zp)({action:c,loadingSelector:j,dataSelector:h,failedSelector:b,param:e})},k=function(){return(0,o.v9)(x)},E=function(e){return(0,i.useMemo)((function(){return{id:(null===e||void 0===e?void 0:e.id)||null,name:(null===e||void 0===e?void 0:e.name)||"",giturl:(null===e||void 0===e?void 0:e.giturl)||"",description:(null===e||void 0===e?void 0:e.description)||""}}),[e])},C=function(){var e=(0,a.s0)(),n=(0,l.qd)({loadingSelector:j,action:d}),r=(0,t.Z)(n,2),i=r[0],o=r[1];return(0,l.E2)(N,"Create project success",(function(){return e("/project")})),(0,l.dH)(w,"Create project Failed"),[i,o]},I=function(){var e=(0,a.s0)(),n=(0,l.qd)({loadingSelector:j,action:f}),r=(0,t.Z)(n,2),i=r[0],o=r[1];return(0,l.E2)(y,"Update project success",(function(){return e("/project")})),(0,l.dH)(_,"Update project Failed"),[i,o]},V=function(){(0,l.Yw)(u)},H=function(e){return(0,l.Zp)({action:p,loadingSelector:j,dataSelector:g,failedSelector:Z,param:e})},P=function(e){var n=(0,o.I0)(),r=(0,l.qd)({loadingSelector:j,action:m}),i=(0,t.Z)(r,2),a=i[0],s=i[1];return(0,l.E2)(S,"Delete project success",(function(){n(c(e))})),(0,l.dH)(q,"Delete project Failed"),[a,s]}},9094:function(e,n,r){r.d(n,{Rk:function(){return k},gq:function(){return I},my:function(){return T},WF:function(){return C},Bo:function(){return q},pv:function(){return S},LL:function(){return F},EW:function(){return E}});var t=r(885),i=r(2791),l=r(3270),o=r(9434),a=r(6871),s=r(4362),c=function(e){return{type:s.zn,payload:e}},d=function(e){return{type:s.yX,payload:e}},u=function(){return{type:s.Hu}},p=function(e){return{type:s.XZ,payload:e}},f=function(e){return{type:s.Cj,payload:e}},m={project_id:"project",platform:"platform",env_id:"environment",version:"version",title:"title",note:"note",apk:"apk",ipa:"ipa","bundle-identifier":"bundleIdentifier","bundle-version":"bundleVersion","bundle-title":"bundleTitle"},v=function(e){return function(n){return n.release[e]}},j=v("isLoading"),h=v("list"),x=v("listParams"),b=v("getListFailed"),g=v("item"),Z=v("getItemFailed"),N=v("createSuccess"),w=v("createFailed"),y=v("deleteSuccess"),_=v("deleteFailed"),S=function(){var e=(0,l.Kx)(),n=e.get("page")||1,r=e.get("per_page")||10,t=e.get("project_id"),o=e.get("env_id"),a=e.get("platform");return(0,i.useMemo)((function(){return{page:n,per_page:r,relation_project:!0,relation_env:!0,order_by_created_at:"desc",project_id:t||void 0,env_id:o||void 0,platform:a||void 0}}),[n,r,t,o,a])},q=function(e){return(0,l.Zp)({action:c,loadingSelector:j,dataSelector:h,failedSelector:b,param:e})},F=function(){return(0,o.v9)(x)},T=function(){return(0,i.useMemo)((function(){return{project:"",platform:"",environment:"",version:"",title:"",note:"",apk:null,windows:null,ipa:null,bundleIdentifier:"",bundleVersion:"",bundleTitle:""}}),[])},k=function(e){var n=(0,a.s0)(),r=(0,l.qd)({loadingSelector:j,action:d}),i=(0,t.Z)(r,2),o=i[0],s=i[1];(0,l.E2)(N,"Create release success",(function(){return n("/")})),(0,l.dH)(w,"Create release Failed",(function(n){n.errors&&Object.keys(n.errors).map((function(r){e.setError(m[r]||r,{message:n.errors[r][0]})}))}));return[o,function(e){var n=new FormData,r={project_id:e.project.value,platform:e.platform.value,env_id:e.environment.value,version:e.version,title:e.title,note:e.note,apk:e.apk?e.apk[0]:null,ipa:e.ipa?e.ipa[0]:null,windows:e.windows?e.windows[0]:null,"bundle-identifier":e.bundleIdentifier,"bundle-version":e.bundleVersion,"bundle-title":e.bundleTitle};return Object.keys(r).map((function(e){n.append(e,r[e])})),s(n)}]},E=function(){(0,l.Yw)(u)},C=function(e){return(0,l.Zp)({action:p,loadingSelector:j,dataSelector:g,failedSelector:Z,param:e})},I=function(e){var n=(0,o.I0)(),r=(0,l.qd)({loadingSelector:j,action:f}),i=(0,t.Z)(r,2),a=i[0],s=i[1];return(0,l.E2)(y,"Delete release success",(function(){n(c(e))})),(0,l.dH)(_,"Delete release Failed"),[a,s]}},4936:function(e,n,r){r.r(n),r.d(n,{default:function(){return y}});var t=r(2791),i=r(1413),l=r(885),o=r(4259),a=r(4695),s=r(9094),c=r(9822),d=r(682),u=r(9815),p=r(2007),f=r.n(p),m=r(7081),v=r(966),j=r(184),h=(0,t.forwardRef)((function(e,n){var r=e.name,t=e.options,i=e.errors,l=e.control;return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(o.Qr,{control:l,name:r,render:function(e){var n=e.field,l=n.onChange,o=n.value,a=n.ref;return(0,j.jsx)(m.ZP,{ref:a,onChange:l,options:t,placeholder:"Select "+r,className:i[r]?"border border-danger rounded-4":"",value:o})}}),(0,j.jsx)(v.Z,{error:i[r]})]})}));h.defaultProps={},h.propTypes={name:f().string,options:f().array,errors:f().object,control:f().object},h.displayName="Select2";var x=h,b=r(3015),g=r(7942),Z=g.Ry().shape({project:g.Ry().shape({value:g.Z_(),label:g.Z_()}).nullable().required("The project field is required"),platform:g.Ry().shape({value:g.Z_(),label:g.Z_()}).nullable().required("The platform field is required"),environment:g.Ry().shape({value:g.Z_(),label:g.Z_()}).nullable().required("The environment field is required"),version:g.Z_().required("The version field is required"),title:g.Z_().required("The title field is required"),windows:g.nK().when("platform",{is:function(e){return"windows"==(null===e||void 0===e?void 0:e.value)},then:function(e){return e.required("The windows file is required")}}),apk:g.nK().when("platform",{is:function(e){return"android"==(null===e||void 0===e?void 0:e.value)},then:function(e){return e.required("The apk file is required")}}),ipa:g.nK().when("platform",{is:function(e){return"ios"==(null===e||void 0===e?void 0:e.value)},then:function(e){return e.required("The ipa file is required")}}),bundleIdentifier:g.Z_().when("platform",{is:function(e){return"ios"==(null===e||void 0===e?void 0:e.value)},then:function(e){return e.required("The bundle identifier field is required")}}),bundleVersion:g.Z_().when("platform",{is:function(e){return"ios"==(null===e||void 0===e?void 0:e.value)},then:function(e){return e.required("The bundle version field is required")}}),bundleTitle:g.Z_().when("platform",{is:function(e){return"ios"==(null===e||void 0===e?void 0:e.value)},then:function(e){return e.required("The bundle title field is required")}})}),N=[{value:"android",label:"Android"},{value:"ios",label:"IOS"},{value:"windows",label:"Windows"}];var w=function(){var e,n,r,p=(0,s.my)();(0,s.EW)();var f=(0,o.cI)({defaultValues:p,resolver:(0,a.X)(Z)}),m=f.register,v=f.handleSubmit,h=f.setError,g=f.formState.errors,w=f.watch,y=f.control,_=f.setValue,S=(0,t.useState)({per_page:0}),q=(0,l.Z)(S,1)[0],F=(0,c.Z0)(q),T=(0,l.Z)(F,1)[0],k=(0,t.useMemo)((function(){return{per_page:0,project_id:w("project").value}}),[w("project")]),E=(0,d.od)(k),C=(0,l.Z)(E,1)[0],I=(0,s.Rk)({setError:h}),V=(0,l.Z)(I,2),H=V[0],P=V[1],R=T.map((function(e){return{value:e.id,label:e.name}})),L=w("project").value?C.map((function(e){return{value:e.id,label:e.name}})):[];return(0,t.useEffect)((function(){w("project")&&_("environment","")}),[w("project")]),(0,j.jsxs)("form",{onSubmit:v(P),children:[(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsxs)("div",{className:"col-sm-4",children:["Project ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)(x,{name:"project",options:R,errors:g,control:y})})]}),(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsxs)("div",{className:"col-sm-4",children:["Platform ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)(x,{name:"platform",options:N,errors:g,control:y})})]}),(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsxs)("div",{className:"col-sm-4",children:["Environment ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)(x,{name:"environment",options:L,errors:g,control:y})})]}),(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsxs)("div",{className:"col-sm-4",children:["Version ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({},m("version")),{},{placeholder:"Version",errors:g}))})]}),(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsxs)("div",{className:"col-sm-4",children:["Release title ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({},m("title")),{},{placeholder:"Title",errors:g}))})]}),(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsx)("div",{className:"col-sm-4",children:"Release notes"}),(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)("textarea",(0,i.Z)({rows:"5",className:"form-control"},m("note")))})]}),(0,j.jsxs)("div",{className:"row mb-3",children:[(0,j.jsxs)("div",{className:"col-sm-4",children:["Bundle ",(0,j.jsx)("span",{className:"text-danger",children:"*"})]}),"windows"===(null===(e=w("platform"))||void 0===e?void 0:e.value)?(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)("div",{className:"row col",children:(0,j.jsxs)("label",{children:[(0,j.jsx)("h5",{children:"Select file windows"}),(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({type:"file"},m("windows")),{},{placeholder:"windows",errors:g}))]})})}):null,"android"===(null===(n=w("platform"))||void 0===n?void 0:n.value)?(0,j.jsx)("div",{className:"col-sm-8",children:(0,j.jsx)("div",{className:"row col",children:(0,j.jsxs)("label",{children:[(0,j.jsx)("h5",{children:"Select file APK"}),(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({type:"file"},m("apk")),{},{placeholder:"apk",errors:g}))]})})}):null,"ios"===(null===(r=w("platform"))||void 0===r?void 0:r.value)?(0,j.jsxs)("div",{className:"col-sm-8",children:[(0,j.jsx)("div",{className:"row col",children:(0,j.jsxs)("label",{children:[(0,j.jsx)("h5",{children:"Select file .ipa"}),(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({type:"file"},m("ipa")),{},{placeholder:"ipa",errors:g}))]})}),(0,j.jsx)("div",{className:"row mt-3",children:(0,j.jsxs)("div",{className:"col",children:[(0,j.jsx)("h5",{children:"Plist meta"}),(0,j.jsxs)("label",{className:"row",children:[(0,j.jsx)("div",{className:"col-sm-3",children:" Bundle-identifier:"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({},m("bundleIdentifier")),{},{placeholder:"Bundle identifier",errors:g}))})]}),(0,j.jsxs)("label",{className:"row",children:[(0,j.jsx)("div",{className:"col-sm-3",children:" Bundle-version:"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({},m("bundleVersion")),{},{placeholder:"Bundle version",errors:g}))})]}),(0,j.jsxs)("label",{className:"row",children:[(0,j.jsx)("div",{className:"col-sm-3",children:"Title:"}),(0,j.jsx)("div",{className:"col-sm-9",children:(0,j.jsx)(u.Z,(0,i.Z)((0,i.Z)({},m("bundleTitle")),{},{placeholder:"Bundle title",errors:g}))})]})]})})]}):null]}),(0,j.jsx)("hr",{}),(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col text-end",children:(0,j.jsx)(b.Z,{loading:H,className:"btn btn-primary text-white",label:"Upload"})})})]})};var y=function(){return(0,j.jsx)(t.Fragment,{children:(0,j.jsx)("div",{className:"container-fluid",children:(0,j.jsx)("div",{className:"row",children:(0,j.jsx)("div",{className:"col-12",children:(0,j.jsx)("div",{className:"card",children:(0,j.jsxs)("div",{className:"card-body",children:[(0,j.jsx)("h4",{className:"card-title",children:"Upload new release"}),(0,j.jsx)("hr",{}),(0,j.jsx)(w,{})]})})})})})})}}}]);
//# sourceMappingURL=936.d13ca277.chunk.js.map